<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>App Alerta Coral</title>
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f0f2f5; /* Fundo cinza claro, comum em apps */
            color: #333;
            margin: 0;
            padding: 0;
        }

        /* --- O SIMULADOR DE CELULAR --- */
        .phone-simulator {
            max-width: 420px;
            min-height: 100vh; /* Ocupa a tela inteira no celular */
            margin: 0 auto;
            background-color: #ffffff;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            position: relative; /* Para o rodap√© */
            padding-bottom: 60px; /* Espa√ßo para o rodap√© */
        }

        /* --- Cabe√ßalho do App --- */
        .app-header {
            background-color: #007bff; /* Azul prim√°rio */
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .app-header h1 { margin: 0; font-size: 24px; }
        .app-header p { margin: 5px 0 0; font-size: 14px; opacity: 0.9; }

        /* --- Conte√∫do Principal (Bot√µes de Den√∫ncia) --- */
        .app-content { padding: 25px; flex-grow: 1; }
        .app-content h2 { margin-top: 0; font-size: 20px; color: #111; }

        .report-buttons button {
            display: flex; align-items: center; gap: 15px; width: 100%;
            padding: 18px 15px; margin: 12px 0; font-size: 16px; font-weight: 500;
            text-align: left; cursor: pointer; border: 1px solid #ddd; border-radius: 10px;
            background-color: #fff; color: #333; transition: background-color 0.2s, transform 0.2s;
        }
        .report-buttons button:hover { background-color: #f8f9fa; transform: scale(1.02); }
        .report-buttons button .icon { font-size: 24px; }

        /* --- Rodap√© de Contato --- */
        .app-footer {
            position: absolute; bottom: 0; left: 0; right: 0; background-color: #e9ecef;
            padding: 10px 20px; font-size: 12px; text-align: center;
            border-top: 1px solid #dee2e6; color: #495057;
        }
        .app-footer a { color: #007bff; font-weight: bold; text-decoration: none; }

        /* --- Estilos Comuns para os Modais --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100vh; 
            background-color: rgba(0, 0, 0, 0.6); display: none; 
            justify-content: center; align-items: center; z-index: 1000; padding: 15px;
        }
        .modal-box {
            background-color: #fff; border-radius: 12px; width: 100%; max-width: 400px;
            box-shadow: 0 5px 25px rgba(0,0,0,0.2); text-align: left; overflow: hidden; 
            z-index: 1002;
        }
        .modal-header { padding: 20px 25px; color: white; display: flex; align-items: center; gap: 12px; }
        .modal-header h2 { margin: 0; font-size: 20px; font-weight: bold; }
        .modal-content { padding: 25px; }
        .modal-footer { padding: 20px 25px; border-top: 1px solid #f0f0f0; background-color: #f9f9f9; text-align: right; }
        .modal-footer button {
            background-color: #6c757d; color: white; padding: 10px 20px; border: none;
            border-radius: 5px; font-size: 16px; font-weight: 500; cursor: pointer; margin-left: 10px;
        }
        .modal-footer button.primary { background-color: #007bff; }

        /* --- MODAL DE DETALHES DA DEN√öNCIA (NOVO) --- */
        #details-header { background-color: #5a6268; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: 500; font-size: 14px; }
        .form-group input, .form-group textarea, .form-group button {
            width: 100%; padding: 10px; font-size: 16px; border: 1px solid #ccc; border-radius: 5px;
        }
        .form-group textarea { resize: vertical; min-height: 80px; }
        #attach-photo-btn.attached { background-color: #d4edda; border-color: #c3e6cb; color: #155724; }

        /* --- MODAL DE CONFIRMA√á√ÉO --- */
        #confirm-header { background-color: #4caf50; }
        #confirm-message { font-size: 16px; line-height: 1.5; margin-bottom: 20px; }
        #confirm-summary { margin-bottom: 20px; border: 1px solid #eee; border-radius: 8px; overflow: hidden; }
        #confirm-summary p { margin: 0; padding: 10px 15px; border-bottom: 1px solid #eee; font-size: 14px; }
        #confirm-summary p:last-child { border-bottom: none; }
        #confirm-summary strong { color: #333; }
        #confirm-next-step { background-color: #f4f7f6; padding: 15px; border-radius: 8px; border-left: 5px solid #007bff; margin-bottom: 20px; }
        #confirm-next-step h4 { margin: 0 0 8px 0; }
        #confirm-next-step p { margin: 0; font-size: 14px; }
        #confirm-curiosity { background-color: #fff3cd; border-radius: 8px; padding: 15px; border-left: 5px solid #ffc107; }
        #confirm-curiosity h5 { margin: 0 0 5px 0; color: #856404; }
        #confirm-curiosity p { margin: 0; font-size: 13px; line-height: 1.4; }
    </style>
</head>
<body>

    <div class="phone-simulator">
        <header class="app-header">
            <h1>Alerta Coral</h1>
            <p>Plataforma de Ci√™ncia Cidad√£</p>
        </header>
        
        <main class="app-content">
            <h2>O que voc√™ viu?</h2>
            <p>Selecione o tipo de ocorr√™ncia para notificar a central de monitoramento.</p>
            
            <div class="report-buttons">
                <button data-action="lixo-praia" data-title="Lixo na Praia ou Mangue"><span class="icon">üóëÔ∏è</span> Lixo na Praia ou Mangue</button>
                <button data-action="mancha-mar" data-title="Mancha de √ìleo ou Lixo no Mar"><span class="icon">üß™</span> Mancha de √ìleo ou Lixo no Mar</button>
                <button data-action="pesca-ilegal" data-title="Pesca Ilegal ou Rede Fantasma"><span class="icon">üé£</span> Pesca Ilegal ou Rede Fantasma</button>
                <button data-action="barco-ilegal" data-title="Barco Ancorado sobre Corais"><span class="icon">‚öì</span> Barco Ancorado sobre Corais</button>
                <button data-action="animal-ferido" data-title="Animal Marinho Ferido ou Encalhado"><span class="icon">üê¢</span> Animal Marinho Ferido ou Encalhado</button>
            </div>
        </main>

        <footer class="app-footer">
            <span>üìû Em caso de emerg√™ncia, ligue para a <a href="#">Pol√≠cia Ambiental: 190</a></span>
        </footer>
    </div>

    <div id="report-details-overlay" class="modal-overlay">
        <div id="details-box" class="modal-box">
            <header id="details-header" class="modal-header">
                <h2 id="details-title"></h2>
            </header>
            <div class="modal-content">
                <div class="form-group">
                    <label>Foto da Ocorr√™ncia</label>
                    <button id="attach-photo-btn">üì∑ Anexar Foto</button>
                </div>
                <div class="form-group">
                    <label for="contact-name">Seu Nome (Opcional)</label>
                    <input type="text" id="contact-name" placeholder="Digite seu nome">
                </div>
                <div class="form-group">
                    <label for="contact-phone">Seu Telefone (Opcional)</label>
                    <input type="tel" id="contact-phone" placeholder="(99) 99999-9999">
                </div>
                <div class="form-group">
                    <label for="report-notes">Observa√ß√µes (Opcional)</label>
                    <textarea id="report-notes" placeholder="Descreva o que voc√™ viu..."></textarea>
                </div>
            </div>
            <footer class="modal-footer">
                <button id="cancel-report-btn">Cancelar</button>
                <button id="send-report-btn" class="primary">Enviar Den√∫ncia</button>
            </footer>
        </div>
    </div>

    <div id="confirmation-overlay" class="modal-overlay">
        <div id="confirmation-box" class="modal-box">
            <header id="confirm-header" class="modal-header">
                <h2 id="confirm-title">‚úÖ Den√∫ncia Enviada!</h2>
            </header>
            <div class="modal-content">
                <p id="confirm-message"></p>

                <div id="confirm-summary">
                    <p><strong>Tipo:</strong> <span id="summary-type"></span></p>
                    <p><strong>Foto Anexada:</strong> <span id="summary-photo"></span></p>
                    <p><strong>Contato Informado:</strong> <span id="summary-contact"></span></p>
                </div>

                <div id="confirm-next-step">
                    <h4>O que acontece agora?</h4>
                    <p><strong>√ìrg√£o Acionado:</strong> <span id="confirm-org-text"></span></p>
                    <p id="confirm-action-text"></p>
                </div>

                <div id="confirm-curiosity">
                    <h5>üí° Voc√™ Sabia?</h5>
                    <p id="confirm-curiosity-text"></p>
                </div>
            </div>
            <footer class="modal-footer">
                <button id="close-confirm" class="primary">Entendido</button>
            </footer>
        </div>
    </div>


    <script>
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();

        // --- Som de Notifica√ß√£o Enviada ---
        function playSuccessSound() {
            try {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                oscillator.connect(gainNode).connect(audioContext.destination);
                oscillator.type = 'sine';
                gainNode.gain.setValueAtTime(0.5, audioContext.currentTime);
                oscillator.frequency.setValueAtTime(1046.50, audioContext.currentTime);
                oscillator.frequency.setValueAtTime(1396.91, audioContext.currentTime + 0.1);
                gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.5);
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.5);
            } catch (e) { console.error("Erro ao tocar som de sucesso:", e); }
        }

        // --- Selecionando Elementos ---
        const reportButtons = document.querySelectorAll('.report-buttons button');
        // Modal 1 (Detalhes)
        const detailsOverlay = document.getElementById('report-details-overlay');
        const detailsTitle = document.getElementById('details-title');
        const attachPhotoBtn = document.getElementById('attach-photo-btn');
        const contactName = document.getElementById('contact-name');
        const contactPhone = document.getElementById('contact-phone');
        const sendReportBtn = document.getElementById('send-report-btn');
        const cancelReportBtn = document.getElementById('cancel-report-btn');
        // Modal 2 (Confirma√ß√£o)
        const confirmOverlay = document.getElementById('confirmation-overlay');
        const closeConfirmButton = document.getElementById('close-confirm');
        const confirmMessage = document.getElementById('confirm-message');
        const confirmOrgText = document.getElementById('confirm-org-text');
        const confirmActionText = document.getElementById('confirm-action-text');
        const confirmCuriosityText = document.getElementById('confirm-curiosity-text');
        // Resumo
        const summaryType = document.getElementById('summary-type');
        const summaryPhoto = document.getElementById('summary-photo');
        const summaryContact = document.getElementById('summary-contact');

        let currentReport = {};

        // --- Fun√ß√µes dos Modais ---
        function openReportDetails(action, title) {
            currentReport = { action, title };
            detailsTitle.innerText = title;
            // Reseta o formul√°rio
            attachPhotoBtn.classList.remove('attached');
            attachPhotoBtn.innerText = 'üì∑ Anexar Foto';
            contactName.value = '';
            contactPhone.value = '';
            document.getElementById('report-notes').value = '';

            detailsOverlay.style.display = 'flex';
        }

        function hideReportDetails() {
            detailsOverlay.style.display = 'none';
        }

        function showConfirmation(data) {
            // Preenche o resumo
            summaryType.innerText = data.summary.title;
            summaryPhoto.innerText = data.summary.photoAttached ? 'Sim' : 'N√£o';
            summaryContact.innerText = data.summary.contactProvided ? 'Sim' : 'N√£o';

            // Preenche o resto
            confirmMessage.innerText = data.message;
            confirmOrgText.innerText = data.org;
            confirmActionText.innerText = data.actionText;
            confirmCuriosityText.innerText = data.curiosity;

            playSuccessSound();
            confirmOverlay.style.display = 'flex';
        }

        function hideConfirmation() {
            confirmOverlay.style.display = 'none';
        }

        // --- L√≥gica de Eventos ---

        // Abrir Modal de Detalhes
        reportButtons.forEach(button => {
            button.addEventListener('click', () => {
                const action = button.getAttribute('data-action');
                const title = button.getAttribute('data-title');
                if (audioContext.state === 'suspended') audioContext.resume();
                openReportDetails(action, title);
            });
        });

        // Simular Anexo de Foto
        attachPhotoBtn.addEventListener('click', () => {
            attachPhotoBtn.classList.toggle('attached');
            if (attachPhotoBtn.classList.contains('attached')) {
                attachPhotoBtn.innerText = '‚úÖ Foto Anexada';
            } else {
                attachPhotoBtn.innerText = 'üì∑ Anexar Foto';
            }
        });
        
        // Bot√µes do Modal de Detalhes
        cancelReportBtn.addEventListener('click', hideReportDetails);
        sendReportBtn.addEventListener('click', () => {
            // 1. Coleta os dados do formul√°rio
            const reportData = {
                summary: {
                    title: currentReport.title,
                    photoAttached: attachPhotoBtn.classList.contains('attached'),
                    contactProvided: contactName.value.trim() !== '' || contactPhone.value.trim() !== ''
                }
            };

            // 2. Busca as informa√ß√µes espec√≠ficas da den√∫ncia
            const reportInfo = getReportInfo(currentReport.action);
            
            // 3. Combina tudo e mostra a confirma√ß√£o
            hideReportDetails();
            showConfirmation({ ...reportData, ...reportInfo });
        });
        
        // Bot√£o para fechar o modal de confirma√ß√£o
        closeConfirmButton.addEventListener('click', hideConfirmation);


        // --- Banco de Dados das Den√∫ncias ---
        function getReportInfo(action) {
            const reports = {
                'lixo-praia': {
                    message: 'Obrigado por reportar o lixo!',
                    org: 'Secretaria de Meio Ambiente',
                    actionText: 'Sua den√∫ncia foi enviada √† equipe de limpeza local para agendar a coleta.',
                    curiosity: 'Uma √∫nica garrafa pl√°stica pode levar mais de 450 anos para se decompor, liberando micropl√°sticos no ambiente.'
                },
                'mancha-mar': {
                    message: 'Obrigado! Den√∫ncia grave recebida.',
                    org: 'IBAMA e Capitania dos Portos',
                    actionText: 'Imagens de sat√©lite da √°rea ser√£o analisadas e uma equipe de conten√ß√£o ser√° notificada para avalia√ß√£o do risco.',
                    curiosity: 'Apenas um litro de √≥leo √© suficiente para contaminar cerca de um milh√£o de litros de √°gua.'
                },
                'pesca-ilegal': {
                    message: 'Obrigado! Sua den√∫ncia √© an√¥nima.',
                    org: 'Pol√≠cia Ambiental e ICMBio',
                    actionText: 'A Patrulha Ambiental foi notificada sobre a atividade suspeita na √°rea e far√° uma verifica√ß√£o.',
                    curiosity: '"Redes fantasma", deixadas no mar, continuam a capturar e matar a vida marinha por d√©cadas.'
                },
                'barco-ilegal': {
                    message: 'Obrigado por proteger os corais!',
                    org: 'Fiscaliza√ß√£o do Parque Marinho (ICMBio)',
                    actionText: 'A patrulha do parque foi acionada para verificar a embarca√ß√£o e orientar o capit√£o a mover para uma √°rea segura.',
                    curiosity: 'Algumas esp√©cies de corais crescem menos de 2 cm por ano. Uma √¢ncora pode destruir d√©cadas de crescimento em segundos.'
                },
                'animal-ferido': {
                    message: 'Obrigado por ajudar!',
                    org: 'Projeto Tartarugas do Delta',
                    actionText: 'Sua den√∫ncia foi encaminhada ao instituto de biologia marinha mais pr√≥ximo para a equipe de resgate e reabilita√ß√£o.',
                    curiosity: 'Muitas tartarugas marinhas confundem sacolas pl√°sticas com √°guas-vivas, uma de suas principais fontes de alimento.'
                }
            };
            return reports[action];
        }

    </script>

</body>
</html>